{% load static formatting %}
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Expense Tracker{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'tracker/app.css' %}">
    {% block extra_head %}{% endblock %}
  </head>
  <body>
    <header class="app-header">
      <div class="header-content">
        <a class="brand" href="{% url 'tracker:dashboard' %}">Expense Tracker</a>
        <nav>
          {% if user.is_authenticated %}
            <span class="user-pill">{{ user.email }}</span>
            <a href="{% url 'account_logout' %}">Salir</a>
          {% else %}
            <a href="{% url 'account_login' %}">Entrar</a>
          {% endif %}
          <a href="{% url 'admin:index' %}">Admin</a>
        </nav>
      </div>
    </header>
    <div class="app-shell">
      {% if user.is_authenticated %}
      <aside class="app-sidebar">
        <nav>
          <a class="sidebar-link" href="{% url 'tracker:dashboard' %}">ğŸ“Š Tablero</a>
          <a class="sidebar-link" href="{% url 'tracker:transaction_list' %}">ğŸ§¾ Transacciones</a>
          <a class="sidebar-link" href="{% url 'tracker:import' %}">â¬‡ï¸ Importar movimientos</a>
          <a class="sidebar-link" href="{% url 'tracker:cards' %}">ğŸ’³ Tarjetas</a>
          <a class="sidebar-link" href="{% url 'tracker:categories' %}">ğŸ“‚ CategorÃ­as & Presupuestos</a>
          <a class="sidebar-link" href="{% url 'tracker:rules' %}">ğŸ§¾ Reglas y automatizaciÃ³n</a>
          <a class="sidebar-link" href="#">ğŸ“¬ Gmail y tokens</a>
          <a class="sidebar-link" href="#">ğŸ¤– Agentes / LLM</a>
          <a class="sidebar-link" href="#">âš™ï¸ Preferencias</a>
        </nav>
      </aside>
      {% endif %}
      <main class="app-main">
        {% if messages %}
        <div class="flash-group">
          {% for message in messages %}
            <div class="flash flash-{{ message.tags|default:'info' }}">{{ message }}</div>
          {% endfor %}
        </div>
        {% endif %}
        {% block content %}{% endblock %}
      </main>
    </div>
    <footer class="app-footer">
      <p>Expense Tracker &middot; {% now 'Y' %}</p>
    </footer>
    <script src="{% static 'tracker/inline-table.js' %}"></script>
    {% block extra_scripts %}{% endblock %}
  </body>
</html>
